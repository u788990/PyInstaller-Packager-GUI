name: äº‘æ‰“åŒ…EXEï¼ˆæ°¸ä¹…å…è´¹ï¼‰

on:
  workflow_dispatch:
    inputs:
      source_file:
        description: 'è¦æ‰“åŒ…çš„ä¸»Pythonæ–‡ä»¶è·¯å¾„ï¼ˆå¦‚ game/main.pyï¼‰'
        required: true
        default: main.py
      output_name:
        description: 'è¾“å‡ºçš„EXEåå­—'
        required: true
        default: æˆ‘çš„æ¸¸æˆ
      mode:
        description: 'æ‰“åŒ…æ¨¡å¼'
        type: choice
        options:
          - onefile
          - onedir
        default: onefile
      noconsole:
        description: 'éšè—é»‘çª—'
        type: boolean
        default: true

jobs:
  build:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: è®¾ç½® Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: å®‰è£…ä¾èµ–
        run: |
          python -m pip install --upgrade pip
          pip install pyinstaller
          pip install -r requirements.txt
      
      - name: äº‘æ‰“åŒ…
        run: python main.py --cloud --source "${{ inputs.source_file }}" --name "${{ inputs.output_name }}" --mode "${{ inputs.mode }}" ${{ inputs.noconsole == true && '--noconsole' || '' }}
      
      - name: ä¸Šä¼ ç»“æœ
        uses: actions/upload-artifact@v4
        with:
          name: ${{ inputs.output_name }}-${{ inputs.mode }}
          path: dist/
```

---

## ğŸ”§ å…³é”®ä¿®æ”¹ç‚¹

| é—®é¢˜ | ä¿®å¤ |
|------|------|
| `options: [onefile, onedir]` | æ”¹ä¸ºåˆ—è¡¨æ ¼å¼ |
| `^` ç»­è¡Œç¬¦ | åˆ é™¤ï¼Œå†™æˆä¸€è¡Œ |
| `$$ {{ ... }}` | æ”¹ä¸º `${{ ... }}` |
| ç¼ºå°‘ pyinstaller | æ·»åŠ  `pip install pyinstaller` |
| å¸ƒå°”åˆ¤æ–­ | `inputs.noconsole == true` |

---

## ğŸ“‹ å¦å¤–æ£€æŸ¥ requirements.txt

ç¡®ä¿ä½ çš„ `requirements.txt` åŒ…å«ï¼š
```
pyinstaller
Pillow
